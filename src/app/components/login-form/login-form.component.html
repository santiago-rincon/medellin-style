<form
  class="w-full flex flex-col gap-y-3 h-full justify-between"
  [formGroup]="loginForm"
  (submit)="signEmailAndPassword()">
  <h3 class="uppercase text-center text-balance text-2xl font-bold">
    Inicio de sesión
  </h3>
  <div class="flex flex-col gap-y-2">
    <label for="mailLog" class="font-semibold">Correo electrónico:</label>
    <p-inputGroup>
      <p-inputGroupAddon>
        <i class="pi pi-envelope"></i>
      </p-inputGroupAddon>
      <input
        type="email"
        pInputText
        formControlName="email"
        class="rounded-s-none w-full h-full ps-2 border border-neutral-800/20 dark:border-none dark:bg-[#111827] focus:outline-none"
        placeholder="usuario@gmail.com"
        id="mailLog" />
    </p-inputGroup>
  </div>
  <div class="flex flex-col gap-y-2">
    <label for="passLog" class="font-semibold">Contraseña:</label>
    <p-inputGroup>
      <p-inputGroupAddon>
        <i class="pi pi-lock"></i>
      </p-inputGroupAddon>
      <input
        type="password"
        pInputText
        formControlName="password"
        class="rounded-s-none w-full h-full ps-2 border border-neutral-800/20 dark:border-none dark:bg-[#111827] focus:outline-none"
        placeholder="•••••••••••••••••••"
        id="passLog" />
    </p-inputGroup>
  </div>
  <button
    type="submit"
    [disabled]="loginForm.invalid || loading"
    class="text-[var(--primary-color)] mt-3 font-semibold rounded-xl text-center border border-[var(--primary-color)] py-2 px-4 hover:bg-[var(--primary-color)] hover:text-white dark:hover:text-white/90 transition-colors duration-300 disabled:pointer-events-none disabled:opacity-60">
    {{ loading ? 'Iniciando' : 'Iniciar' }}
    sesión
    @if (loading) {
      <i class="pi pi-spin pi-spinner"></i>
    }
  </button>
  <strong class="text-sm"
    >¿Has olvidado tu contraseña? Haz clic aquí:
    <button
      class="text-blue-600"
      type="button"
      (click)="this.modalVisible = true">
      Recuperar contraseña
    </button></strong
  >
  <p-divider
    align="center"
    type="solid"
    class="w-full -z-10 [&>div]:before:h-[1px] [&>div]:before:border [&>div]:before:border-neutral-800/20 [&>div]:before:dark:border-neutral-500/50 [&>div>div]:dark:bg-[#121212]">
    <p class="opacity-90">Inicia sesión con:</p>
  </p-divider>
  <button
    (click)="signGoogle()"
    [disabled]="loadingGoogle"
    class="rounded-2xl font-semibold py-1 w-1/2 px-5 mx-auto border border-red-600 group hover:bg-red-600 hover:text-white transition-colors disabled:pointer-events-none disabled:opacity-60">
    <i
      class="pi pi-google text-red-600 group-hover:text-white transition-colors"></i>
    Google
    @if (loadingGoogle) {
      <i class="pi pi-spin pi-spinner"></i>
    }
  </button>
</form>
<p-dialog
  [visible]="modalVisible"
  styleClass="px-6 py-12 bg-white dark:bg-[#121212]">
  <ng-template pTemplate="headless" class="backdrop-blur">
    <form
      class="flex flex-col gap-y-6 justify-center items-center"
      [formGroup]="resetForm"
      (submit)="resetPassword()">
      <h3 class="uppercase text-center text-balance text-2xl font-bold">
        Recuperar contraseña
      </h3>
      <div class="flex flex-col gap-y-2 w-full">
        <label for="mailReset" class="font-semibold">Correo electrónico:</label>
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-envelope"></i>
          </p-inputGroupAddon>
          <input
            type="email"
            pInputText
            formControlName="emailReset"
            class="rounded-s-none w-full h-full ps-2 border border-neutral-800/20 dark:border-none dark:bg-[#111827] focus:outline-none"
            placeholder="usuario@gmail.com"
            id="mailreset" />
        </p-inputGroup>
      </div>
      <button
        type="submit"
        [disabled]="resetForm.invalid || loadingReset"
        class="w-3/4 text-[var(--primary-color)] mt-3 font-semibold rounded-xl text-center border border-[var(--primary-color)] py-2 px-4 hover:bg-[var(--primary-color)] hover:text-white dark:hover:text-white/90 transition-colors duration-300 disabled:pointer-events-none disabled:opacity-60">
        Recuperar contraseña
        @if (loadingReset) {
          <i class="pi pi-spin pi-spinner"></i>
        }
      </button>
    </form>
    <button
      type="button"
      (click)="modalVisible = false"
      class="absolute top-3 right-5 hover:scale-110 transition-transform">
      <i class="pi pi-times"></i>
    </button>
  </ng-template>
</p-dialog>
